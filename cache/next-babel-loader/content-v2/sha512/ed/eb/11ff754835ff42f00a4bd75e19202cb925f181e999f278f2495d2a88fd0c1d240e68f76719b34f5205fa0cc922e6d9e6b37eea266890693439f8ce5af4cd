{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, Fragment } from \"react\";\nimport Link from \"next/link\";\nimport { connect } from \"react-redux\";\nimport { useToasts } from \"react-toast-notifications\";\nimport { addToCart, decreaseQuantity, deleteFromCart, deleteAllFromCart, cartItemStock } from \"../../redux/actions/cartActions\";\nimport { getDiscountPrice } from \"../../lib/product\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { LayoutOne } from \"../../layouts\";\nimport { BreadcrumbOne } from \"../../components/Breadcrumb\";\nimport { IoIosClose } from \"react-icons/io\";\nimport { ShippingFetch, ProductCategoryFetchCalls } from '../../services/api/fetchCalls/ProductFetchCalls';\n\nconst Cart = ({\n  productData,\n  products,\n  cartItems,\n  decreaseQuantity,\n  addToCart,\n  deleteFromCart,\n  deleteAllFromCart\n}) => {\n  const {\n    0: quantityCount\n  } = useState(1);\n  const {\n    addToast\n  } = useToasts();\n  let cartTotalPrice = 0;\n  const cartShipID = cartItems.map(element => {\n    if (element.shipping_required = true) {\n      return element.shipping_class_id;\n    }\n  });\n  var shippingPirce = [];\n  products.map(data => {\n    if (data.method_id === \"free_shipping\") {\n      shippingPirce.push(0);\n    }\n\n    if (data.method_id === \"flat_rate\") {\n      cartShipID.forEach(id => {\n        for (const property in data.settings) {\n          if (property == `class_cost_${id}`) {\n            shippingPirce.push(data.settings[property].value);\n          }\n        }\n      });\n    }\n  });\n\n  Array.prototype.max = function () {\n    return Math.max.apply(null, this);\n  };\n\n  return __jsx(LayoutOne, {\n    productData: productData\n  }, __jsx(BreadcrumbOne, {\n    pageTitle: \"Shopping Cart\"\n  }, __jsx(\"ol\", {\n    className: \"breadcrumb justify-content-md-end\"\n  }, __jsx(\"li\", {\n    className: \"breadcrumb-item\"\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", null, \"Home\"))), __jsx(\"li\", {\n    className: \"breadcrumb-item active\"\n  }, \"Shopping Cart\"))), __jsx(\"div\", {\n    className: \"cart-content space-pt--r100 space-pb--r100\"\n  }, __jsx(Container, null, cartItems && cartItems.length >= 1 ? __jsx(Fragment, null, __jsx(Row, null, __jsx(Col, {\n    lg: 12\n  }, __jsx(\"div\", {\n    className: \"table-responsive shop-cart-table\"\n  }, __jsx(\"table\", {\n    className: \"table mb-0\"\n  }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", {\n    className: \"product-thumbnail\"\n  }, \"\\xA0\"), __jsx(\"th\", {\n    className: \"product-name\"\n  }, \"Product\"), __jsx(\"th\", {\n    className: \"product-price\"\n  }, \"Price\"), __jsx(\"th\", {\n    className: \"product-quantity\"\n  }, \"Quantity\"), __jsx(\"th\", {\n    className: \"product-subtotal\"\n  }, \"Total\"), __jsx(\"th\", {\n    className: \"product-remove text-center\"\n  }, \"Remove\"))), __jsx(\"tbody\", null, cartItems.map((product, key) => {\n    const discountedPrice = getDiscountPrice(product.regular_price, product.price).toFixed(2);\n    cartTotalPrice += product.price * product.quantity;\n    return __jsx(\"tr\", {\n      key: key\n    }, __jsx(\"td\", {\n      className: \"product-thumbnail\"\n    }, __jsx(Link, {\n      href: `/shop/product/[slug]?slug=${product.slug}`,\n      as: \"/shop/product/\" + product.slug\n    }, __jsx(\"a\", null, __jsx(\"img\", {\n      src: product.images[0].src,\n      alt: \"product1\"\n    })))), __jsx(\"td\", {\n      className: \"product-name\",\n      \"data-title\": \"Product\"\n    }, __jsx(Link, {\n      href: `/shop/product/[slug]?slug=${product.slug}`,\n      as: \"/shop/product/\" + product.slug\n    }, __jsx(\"a\", null, product.name)), product.selectedProductColor && product.selectedProductSize ? __jsx(\"div\", {\n      className: \"cart-variation\"\n    }) : \"\"), __jsx(\"td\", {\n      className: \"product-price\",\n      \"data-title\": \"Price\"\n    }, \"\\xA3\", product.price), __jsx(\"td\", {\n      className: \"product-quantity\",\n      \"data-title\": \"Quantity\"\n    }, __jsx(\"div\", {\n      className: \"cart-plus-minus\"\n    }, __jsx(\"button\", {\n      onClick: () => decreaseQuantity(product, addToast),\n      className: \"qtybutton\"\n    }, \"-\"), __jsx(\"input\", {\n      className: \"cart-plus-minus-box\",\n      type: \"text\",\n      value: product.quantity,\n      readOnly: true\n    }), __jsx(\"button\", {\n      onClick: () => addToCart(product, addToast, quantityCount),\n      disabled: product !== undefined && product.quantity && product.quantity >= cartItemStock(product, product.selectedProductColor, product.selectedProductSize),\n      className: \"qtybutton\"\n    }, \"+\"))), __jsx(\"td\", {\n      className: \"product-subtotal\",\n      \"data-title\": \"Total\"\n    }, \"\\xA3\", (product.price * product.quantity).toFixed(2)), __jsx(\"td\", {\n      className: \"product-remove\"\n    }, __jsx(\"button\", {\n      onClick: () => deleteFromCart(product, addToast)\n    }, __jsx(IoIosClose, null))));\n  })), __jsx(\"tfoot\", null, __jsx(\"tr\", null, __jsx(\"td\", {\n    colSpan: \"6\",\n    className: \"px-0 pb-0\"\n  }, __jsx(Row, {\n    className: \"no-gutters align-items-center\"\n  }, __jsx(Col, {\n    lg: 4,\n    md: 6,\n    className: \"mb-3 mb-md-0\"\n  }, __jsx(\"div\", {\n    className: \"coupon field-form input-group\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control form-control-sm\",\n    placeholder: \"Enter Coupon Code..\"\n  }), __jsx(\"div\", {\n    className: \"input-group-append\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-fill-out btn-sm\",\n    type: \"submit\"\n  }, \"Apply Coupon\")))), __jsx(Col, {\n    lg: 8,\n    md: 6,\n    className: \"text-left text-md-right\"\n  }, __jsx(\"button\", {\n    className: \"btn btn-line-fill btn-sm\",\n    type: \"submit\",\n    onClick: () => deleteAllFromCart(addToast)\n  }, \"Clear Cart\")))))))))), __jsx(Row, null, __jsx(Col, {\n    lg: 12\n  }, __jsx(\"div\", {\n    className: \"divider center-icon space-mt--30 space-mb--30\"\n  }, __jsx(\"i\", {\n    className: \"icon-basket-loaded\"\n  })))), __jsx(Row, null, __jsx(Col, {\n    md: 6\n  }), __jsx(Col, {\n    md: 6\n  }, __jsx(\"div\", {\n    className: \"border p-3 p-md-4\"\n  }, __jsx(\"div\", {\n    className: \"heading-s1 mb-3\"\n  }, __jsx(\"h6\", null, \"Cart Totals\")), __jsx(\"div\", {\n    className: \"table-responsive\"\n  }, __jsx(\"table\", {\n    className: \"table\"\n  }, __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"cart-total-label\"\n  }, \"Cart Subtotal\"), __jsx(\"td\", {\n    className: \"cart-total-amount\"\n  }, \"\\xA3 \", cartTotalPrice.toFixed(2))), __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"cart-total-label\"\n  }, \"Shipping\"), __jsx(\"td\", {\n    className: \"cart-total-amount\"\n  }, \"\\xA3 \", shippingPirce.max())), __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"cart-total-label\"\n  }, \"Total\"), __jsx(\"td\", {\n    className: \"cart-total-amount\"\n  }, __jsx(\"strong\", null, \"\\xA3\", (cartTotalPrice + shippingPirce.max()).toFixed(2))))))), __jsx(Link, {\n    href: \"/other/checkout\"\n  }, __jsx(\"a\", {\n    className: \"btn btn-fill-out\"\n  }, \"Proceed To CheckOut\")))))) : __jsx(Row, null, __jsx(Col, null, __jsx(\"div\", {\n    className: \"item-empty-area text-center\"\n  }, __jsx(\"div\", {\n    className: \"item-empty-area__icon space-mb--30\"\n  }, __jsx(\"i\", {\n    className: \"icon-basket-loaded\"\n  })), __jsx(\"div\", {\n    className: \"item-empty-area__text\"\n  }, __jsx(\"p\", {\n    className: \"space-mb--30\"\n  }, \"No items found in cart\"), __jsx(Link, {\n    href: \"/shop/shop-by-product\"\n  }, __jsx(\"a\", {\n    className: \"btn btn-fill-out\"\n  }, \"Shop Now\")))))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    cartItems: state.cartData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addToCart: (item, addToast, quantityCount) => {\n      dispatch(addToCart(item, addToast, quantityCount));\n    },\n    decreaseQuantity: (item, addToast) => {\n      dispatch(decreaseQuantity(item, addToast));\n    },\n    deleteFromCart: (item, addToast) => {\n      dispatch(deleteFromCart(item, addToast));\n    },\n    deleteAllFromCart: addToast => {\n      dispatch(deleteAllFromCart(addToast));\n    }\n  };\n};\n\nexport const getServerSideProps = async () => {\n  const data = await ShippingFetch();\n  const roomMenu = await ProductCategoryFetchCalls(76);\n  const productMenu = await ProductCategoryFetchCalls(17);\n  return {\n    props: {\n      products: data,\n      productData: {\n        productMenu,\n        roomMenu\n      }\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","map":null,"metadata":{},"sourceType":"module"}