{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[42],{GIzH:function(t,n,e){\"use strict\";e.r(n);var r=e(\"q1tI\"),a=e.n(r),o=e(\"UXhI\"),c=a.a.createElement;n.default=function(){return c(a.a.Fragment,null,c(o.a,null))}},\"HaE+\":function(t,n,e){\"use strict\";function r(t,n,e,r,a,o,c){try{var i=t[o](c),u=i.value}catch(s){return void e(s)}i.done?n(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var c=t.apply(n,e);function i(t){r(c,a,o,i,u,\"next\",t)}function u(t){r(c,a,o,i,u,\"throw\",t)}i(void 0)}))}}e.d(n,\"a\",(function(){return a}))},UXhI:function(t,n,e){\"use strict\";var r=e(\"o0o1\"),a=e.n(r),o=e(\"HaE+\"),c=e(\"q1tI\"),i=e.n(c),u=e(\"YFqc\"),s=e.n(u),d=e(\"v4r+\"),l=e(\"eWwy\"),p=e(\"vDqi\"),f=e.n(p),m=e(\"GvDT\"),h=i.a.createElement,b=function(t){var n=t.address,e=t.orderProducts,r=Object(l.useStripe)(),i=Object(l.useElements)(),u=function(){var t=Object(o.a)(a.a.mark((function t(c){var u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),u={payment_method:\"bacs\",payment_method_title:\"Debit Card\",set_paid:!1,shipping:n,billing:n,line_items:e},t.next=4,Object(m.a)(u).then(function(){var t=Object(o.a)(a.a.mark((function t(n){var e,c,u,s,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.createPaymentMethod({type:\"card\",card:i.getElement(l.CardElement)});case 2:if(e=t.sent,c=e.error,u=e.paymentMethod,!c){s=u.id;try{console.log(n,\"paymentmethod\"),d=n.line_items.map((function(t){return t.name})),f.a.post(\"/api/payment/charge\",{id:s,amount:parseInt(100*n.total),description:d.toString()}).then(function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.b)(n.id,{status:\"completed\"}).then((function(t){console.log(t,\"updated data\")}));case 2:case\"end\":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(t){console.log(t,\"error\")}))}catch(c){console.log(c,\"error\")}}case 6:case\"end\":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),(function(t){alert(t)}));case 4:case\"end\":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=Object(c.useState)(!0),p=d[0],b=d[1];return h(\"form\",{onSubmit:u},h(l.CardElement,null),h(\"div\",{className:\"form-group\"},h(\"label\",null,h(\"input\",{type:\"checkbox\",onChange:function(){b(!1)}}),\"\\xa0 I confirm I have read and accept Koala Interiors Limited terms and conditions and \",h(s.a,{href:\"#\"},h(\"a\",{style:{color:\"blue\"}},\"terms and conditions\")),\" returns policy\")),h(\"button\",{disabled:p,className:\"btn btn-fill-out btn-block\"},\"Place Order\"))},v=Object(d.a)(\"pk_test_51IQXdrDbGNdhZzB0FBALDBzViafiz3A99smpVcoD4BSKGdm6XFM9vqrbN3NLhy2KGaKA79dLV8srZB9WDVoRGeY700VyS5E8MF\");n.a=function(t){var n=t.address,e=t.orderProducts;return h(l.Elements,{stripe:v},h(b,{address:n,orderProducts:e}))}},n11V:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/other/payment\",function(){return e(\"GIzH\")}])},o0o1:function(t,n,e){t.exports=e(\"ls82\")}},[[\"n11V\",1,2,0,3,11,12]]]);","map":{"version":3,"sources":["static/chunks/pages/other/payment-d8c8d278b4943853fd22.js"],"names":["_N_E","window","push","GIzH","module","__webpack_exports__","__webpack_require__","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_Payment_MyStoreCheckout__WEBPACK_IMPORTED_MODULE_1__","__jsx","a","createElement","Fragment","HaE+","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","d","UXhI","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","next_link__WEBPACK_IMPORTED_MODULE_3__","next_link__WEBPACK_IMPORTED_MODULE_3___default","_stripe_stripe_js__WEBPACK_IMPORTED_MODULE_4__","_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__","axios__WEBPACK_IMPORTED_MODULE_6__","axios__WEBPACK_IMPORTED_MODULE_6___default","_services_api_fetchCalls_OrderFetchcalls__WEBPACK_IMPORTED_MODULE_7__","CheckoutForm","_ref","address","orderProducts","stripe","Object","elements","handleSubmit","_ref2","mark","_callee3","event","data","wrap","_context3","prev","next","preventDefault","payment_method","payment_method_title","set_paid","shipping","billing","line_items","_ref3","_callee2","_yield$stripe$createP","paymentMethod","id","description","_context2","createPaymentMethod","type","card","getElement","sent","console","log","map","item","name","post","amount","parseInt","total","toString","_ref4","_callee","ordered","_context","status","updated","stop","_x3","_x2","errors","alert","_x","_useState","agree","setAgree","onSubmit","className","onChange","href","style","color","disabled","stripePromise","_ref5","n11V","exports","__NEXT_P","o0o1"],"mappings":"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"},"name":"static/chunks/pages/other/payment-d8c8d278b4943853fd22.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[42],{\n\n/***/ \"GIzH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Payment_MyStoreCheckout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"UXhI\");\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\n\n\nvar Payment = function Payment() {\n  return __jsx(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, __jsx(_components_Payment_MyStoreCheckout__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], null));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Payment);\n\n/***/ }),\n\n/***/ \"HaE+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ }),\n\n/***/ \"UXhI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _stripe_stripe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"v4r+\");\n/* harmony import */ var _stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"eWwy\");\n/* harmony import */ var _stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"vDqi\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _services_api_fetchCalls_OrderFetchcalls__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"GvDT\");\n\n\n\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement;\n\n\n\n\n\n\n\nvar CheckoutForm = function CheckoutForm(_ref) {\n  var address = _ref.address,\n      orderProducts = _ref.orderProducts;\n  var stripe = Object(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__[\"useStripe\"])();\n  var elements = Object(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__[\"useElements\"])();\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(event) {\n      var data;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              data = {\n                \"payment_method\": \"bacs\",\n                \"payment_method_title\": \"Debit Card\",\n                \"set_paid\": false,\n                \"shipping\": address,\n                \"billing\": address,\n                \"line_items\": orderProducts\n              }; //order place\n\n              _context3.next = 4;\n              return Object(_services_api_fetchCalls_OrderFetchcalls__WEBPACK_IMPORTED_MODULE_7__[/* OrderFetchCalls */ \"a\"])(data).then( /*#__PURE__*/function () {\n                var _ref3 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(data) {\n                  var _yield$stripe$createP, error, paymentMethod, id, description;\n\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return stripe.createPaymentMethod({\n                            type: \"card\",\n                            card: elements.getElement(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__[\"CardElement\"])\n                          });\n\n                        case 2:\n                          _yield$stripe$createP = _context2.sent;\n                          error = _yield$stripe$createP.error;\n                          paymentMethod = _yield$stripe$createP.paymentMethod;\n\n                          if (!error) {\n                            id = paymentMethod.id;\n\n                            try {\n                              console.log(data, \"paymentmethod\");\n                              description = data.line_items.map(function (item) {\n                                return item.name;\n                              });\n                              axios__WEBPACK_IMPORTED_MODULE_6___default.a.post(\"/api/payment/charge\", {\n                                id: id,\n                                amount: parseInt(data.total * 100),\n                                description: description.toString()\n                              }).then( /*#__PURE__*/function () {\n                                var _ref4 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(ordered) {\n                                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          _context.next = 2;\n                                          return Object(_services_api_fetchCalls_OrderFetchcalls__WEBPACK_IMPORTED_MODULE_7__[/* OrderUpdateCalls */ \"b\"])(data.id, {\n                                            \"status\": \"completed\"\n                                          }).then(function (updated) {\n                                            console.log(updated, \"updated data\");\n                                          });\n\n                                        case 2:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee);\n                                }));\n\n                                return function (_x3) {\n                                  return _ref4.apply(this, arguments);\n                                };\n                              }())[\"catch\"](function (error) {\n                                console.log(error, \"error\");\n                              });\n                            } catch (error) {\n                              console.log(error, \"error\");\n                            }\n                          }\n\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }(), function (errors) {\n                alert(errors);\n              });\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(true),\n      agree = _useState[0],\n      setAgree = _useState[1];\n\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__[\"CardElement\"], null), __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", null, __jsx(\"input\", {\n    type: \"checkbox\",\n    onChange: function onChange() {\n      setAgree(false);\n    }\n  }), \"\\xA0 I confirm I have read and accept Koala Interiors Limited terms and conditions and \", __jsx(next_link__WEBPACK_IMPORTED_MODULE_3___default.a, {\n    href: \"#\"\n  }, __jsx(\"a\", {\n    style: {\n      color: \"blue\"\n    }\n  }, \"terms and conditions\")), \" returns policy\")), __jsx(\"button\", {\n    disabled: agree,\n    className: \"btn btn-fill-out btn-block\"\n  }, \"Place Order\"));\n};\n\nvar stripePromise = Object(_stripe_stripe_js__WEBPACK_IMPORTED_MODULE_4__[/* loadStripe */ \"a\"])(\"pk_test_51IQXdrDbGNdhZzB0FBALDBzViafiz3A99smpVcoD4BSKGdm6XFM9vqrbN3NLhy2KGaKA79dLV8srZB9WDVoRGeY700VyS5E8MF\");\n\nvar MyStoreCheckout = function MyStoreCheckout(_ref5) {\n  var address = _ref5.address,\n      orderProducts = _ref5.orderProducts;\n  return __jsx(_stripe_react_stripe_js__WEBPACK_IMPORTED_MODULE_5__[\"Elements\"], {\n    stripe: stripePromise\n  }, __jsx(CheckoutForm, {\n    address: address,\n    orderProducts: orderProducts\n  }));\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MyStoreCheckout);\n\n/***/ }),\n\n/***/ \"n11V\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/other/payment\",\n        function () {\n          return __webpack_require__(\"GIzH\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"o0o1\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"ls82\");\n\n\n/***/ })\n\n},[[\"n11V\",1,2,0,3,11,12]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\src\\pages\\other\\payment.js","C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\node_modules\\@babel\\runtime\\helpers\\esm\\asyncToGenerator.js","C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\src\\components\\Payment\\MyStoreCheckout.js","C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fother%2Fpayment&absolutePagePath=private-next-pages%2Fother%2Fpayment.js!","C:\\Users\\evija\\Desktop\\New folder (2)\\KoalaInteriors\\node_modules\\@babel\\runtime\\regenerator\\index.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAA0B;AAC1B,YAAY,4CAAK;AACsD;;AAEvE;AACA,eAAe,4CAAK,uBAAuB,mFAAe;AAC1D;;AAEe,sEAAO,E;;;;;;;;ACRtB;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AACe;AAClD;AAC1B,YAAY,4CAAK;AAC2B;AACf;AACkB;AACyC;AAC9D;AACwE;;AAElG;AACA;AACA;AACA,eAAe,yEAAS;AACxB,iBAAiB,2EAAW;;AAE5B;AACA,gBAAgB,mGAAiB,eAAe,iEAAmB;AACnE;AACA,aAAa,iEAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA,qBAAqB,wGAAe;AACpC,4BAA4B,mGAAiB,eAAe,iEAAmB;AAC/E;;AAEA,yBAAyB,iEAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,mEAAW;AACjE,2BAA2B;;AAE3B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,8BAA8B,4CAAK;AACnC;AACA;AACA;AACA,+BAA+B;AAC/B,4CAA4C,mGAAiB,eAAe,iEAAmB;AAC/F,yCAAyC,iEAAmB;AAC5D;AACA;AACA;AACA;AACA,iDAAiD,yGAAgB;AACjE;AACA,2CAA2C;AAC3C;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,iCAAiC;;AAEjC;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,+BAA+B;AAC/B,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;;AAEjB;AACA;AACA;AACA,eAAe;AACf;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA;AACA;AACA,GAAG,QAAQ,mEAAW;AACtB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG,oGAAoG,gDAAI;AAC3G;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA,oBAAoB,4EAAU;;AAE9B;AACA;AACA;AACA,eAAe,gEAAQ;AACvB;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEe,wEAAe,E;;;;;;;;ACnK9B;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAqC;AAC9D;AACA;;;;;;;;ACNA,iBAAiB,mBAAO,CAAC,MAAqB","file":"x","sourcesContent":["import React from \"react\";\nvar __jsx = React.createElement;\nimport MyStoreCheckout from \"../../components/Payment/MyStoreCheckout\";\n\nvar Payment = function Payment() {\n  return __jsx(React.Fragment, null, __jsx(MyStoreCheckout, null));\n};\n\nexport default Payment;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport { OrderFetchCalls, OrderUpdateCalls } from '../../services/api/fetchCalls/OrderFetchcalls';\n\nvar CheckoutForm = function CheckoutForm(_ref) {\n  var address = _ref.address,\n      orderProducts = _ref.orderProducts;\n  var stripe = useStripe();\n  var elements = useElements();\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              data = {\n                \"payment_method\": \"bacs\",\n                \"payment_method_title\": \"Debit Card\",\n                \"set_paid\": false,\n                \"shipping\": address,\n                \"billing\": address,\n                \"line_items\": orderProducts\n              }; //order place\n\n              _context3.next = 4;\n              return OrderFetchCalls(data).then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n                  var _yield$stripe$createP, error, paymentMethod, id, description;\n\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return stripe.createPaymentMethod({\n                            type: \"card\",\n                            card: elements.getElement(CardElement)\n                          });\n\n                        case 2:\n                          _yield$stripe$createP = _context2.sent;\n                          error = _yield$stripe$createP.error;\n                          paymentMethod = _yield$stripe$createP.paymentMethod;\n\n                          if (!error) {\n                            id = paymentMethod.id;\n\n                            try {\n                              console.log(data, \"paymentmethod\");\n                              description = data.line_items.map(function (item) {\n                                return item.name;\n                              });\n                              axios.post(\"/api/payment/charge\", {\n                                id: id,\n                                amount: parseInt(data.total * 100),\n                                description: description.toString()\n                              }).then( /*#__PURE__*/function () {\n                                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ordered) {\n                                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          _context.next = 2;\n                                          return OrderUpdateCalls(data.id, {\n                                            \"status\": \"completed\"\n                                          }).then(function (updated) {\n                                            console.log(updated, \"updated data\");\n                                          });\n\n                                        case 2:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee);\n                                }));\n\n                                return function (_x3) {\n                                  return _ref4.apply(this, arguments);\n                                };\n                              }())[\"catch\"](function (error) {\n                                console.log(error, \"error\");\n                              });\n                            } catch (error) {\n                              console.log(error, \"error\");\n                            }\n                          }\n\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }(), function (errors) {\n                alert(errors);\n              });\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState = useState(true),\n      agree = _useState[0],\n      setAgree = _useState[1];\n\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(CardElement, null), __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", null, __jsx(\"input\", {\n    type: \"checkbox\",\n    onChange: function onChange() {\n      setAgree(false);\n    }\n  }), \"\\xA0 I confirm I have read and accept Koala Interiors Limited terms and conditions and \", __jsx(Link, {\n    href: \"#\"\n  }, __jsx(\"a\", {\n    style: {\n      color: \"blue\"\n    }\n  }, \"terms and conditions\")), \" returns policy\")), __jsx(\"button\", {\n    disabled: agree,\n    className: \"btn btn-fill-out btn-block\"\n  }, \"Place Order\"));\n};\n\nvar stripePromise = loadStripe(\"pk_test_51IQXdrDbGNdhZzB0FBALDBzViafiz3A99smpVcoD4BSKGdm6XFM9vqrbN3NLhy2KGaKA79dLV8srZB9WDVoRGeY700VyS5E8MF\");\n\nvar MyStoreCheckout = function MyStoreCheckout(_ref5) {\n  var address = _ref5.address,\n      orderProducts = _ref5.orderProducts;\n  return __jsx(Elements, {\n    stripe: stripePromise\n  }, __jsx(CheckoutForm, {\n    address: address,\n    orderProducts: orderProducts\n  }));\n};\n\nexport default MyStoreCheckout;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/other/payment\",\n        function () {\n          return require(\"private-next-pages/other/payment.js\");\n        }\n      ]);\n    ","module.exports = require(\"regenerator-runtime\");\n"]}}